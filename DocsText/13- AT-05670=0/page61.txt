Function 08 â€” Loopback Diagnostics Test, Continued

Diagnostic Code 0

Diagnostic Code 1

Diagnostic Code 10

Diagnostic Code 0, Return Query Data, is the most useful. This allows
the host system (MODBUS master) to test loop communications and
verify that the slave device can correctly generate checksum values
(CRC-16 for MODBUS RTU and LRC for MODBUS ASCII). Verifying the
checksum requires sending a series of Loopback Diagnostics Test mes-
sages with different 16-bit data values. The addressed slave will send a
response to this diagnostic code. The response should match the mes-
sage sent by the master, but a checksum will be generated by the slave
and is not just an echo of the command's checksum.

Diagnostic Code 1, Restart Communications Option, tells the slave to
reinitialize all serial communications including clearing all event counters
(message and error counters). After initialization, the slave will resume
waiting to be polled by the master. The slave does not send a response
to this diagnostic code. MODICON specifies two data values for this di-
agnostic code indicating whether the slave should halt or continue when
a communications error is detected. A data value of 0x0000 specifies the
slave should halt on communications error. A value of OxFFOO says the
slave should continue on communications error (but increment error
event counters).

Note: For diagnostics on remote devices in SCADA systems, it is useful
to halt the slave device when an error occurs and then read a communi-
cations log (Function Code 12). Otherwise, the MODBUS implementa-
tion should ignore the data values for Diagnostic Code 1 (i.e., accept all
values).

Diagnostic Code 10, Clear Counters and Diagnostic Register, is useful if
Function Code 11, Fetch Communications Event Counter, is imple-
mented. A MODBUS slave increments the event counter for every suc-
cessful command from the MODBUS master (i.e., commands that
caused no errors). A MODBUS master can send a series of commands
and then check the event counter to verify that all were successful. This
can be useful in testing a new configuration. The slave sends a response
that echoes the command from the master.

2000584-001

Maxum MODBUS User's Guide e 55
